# 13장 컴포넌트 응집도

# REP: 재사용/릴리스 등가 원칙

---

- Reuse/Release Equivalence Principle

> 재사용 단위는 릴리스 단위와 같다.
> 
- 재사용 가능한 컴포넌트나 컴포넌트 라이브러리가 엄청나게 많이 만들어졌기 때문에 모듈관리 도구는 점점 중요해졌다.
- 컴포넌트가 릴리스 절차를 통해 추적 관리되지 않거나 릴리스 번호가 부여되지 않는다면 해당 컴포넌트를 재사용하기 어렵다.
- 릴리즈 버전을 통해 언제 출시되고, 무엇이 변경되었는지를 개발자들이 알아야 한다.
- 릴리즈 절차에는 배포 문서와 배포 공지도 포함되어야 한다.
- 이 원칙을 소프트웨어 설계와 아키텍처 관점에서 보면 단일 컴포넌트는 응집성 높은 클래스와 모듈들로 구성되어야 한다. 컴포넌트를 구성하는 모든 모듈은 서로 공유하는 중요한 테마나 목적이 있어야 한다.
- REP의 약점은 CCP와 CRP로 보완할 수 있다.

# CCP: 공통 폐쇄 원칙

---

- Common Closure Principle

> 동일한 이유로 동일한 시점에 변경되는 클래스를 같은 컴포넌트로 묶어라. 서로 다른 시점에 다른 이유로 변경되는 클래스는 다른 컴포넌트로 분리하라.
> 
- 위 원칙은 단일 책임 원칙(SRP)를 컴포넌트 관점에서 다시 쓴 것이다. 공통 폐쇄 원칙에서도 단일 컴포넌트는 변경의 이유가 여러 개 있어서는 안 된다고 말한다.
- 대다수의 애플리케이션에서 유지보수성은 재사용성보다 훨씬 중요하다. 변경된 컴포넌트에 의존하지 않는 다른 컴포넌트는 다시 검증하거나 배포할 필요가 없다.
- 개방 폐쇄 원칙(OCP)에서는 클래스가 변경에는 닫혀 있고 확장에는 열려 있어야 한다고 말한다. 완전 폐쇄는 불가능하므로 전략적으로 폐쇄해야 한다.

## SRP와의 유사성

- CCP는 컴포넌트 수준의 SRP다.

> 동일한 시점에 동일한 이유로 변경되는 것들을 한데 묶어라. 서로 다른 시점에 다른 이유로 변경되는 것들은 서로 분리하라.
> 

# CRP: 공통 재사용 원칙

---

- Common Reuse Principle

> 컴포넌트 사용자들을 필요하지 않는 것에 의존하게 강요하지 말라.
> 
- 클래스와 모듈을 어느 컴포넌트에 위치시킬지 결정할 때 도움이 되는 원칙
- 재사용 가능한 클래스는 재사용 모듈의 일부로써 해당 모듈의 다른 클래스와 상호작용하는 경우가 많다.
    - CRP는 이런 클래스들이 동일한 컴포넌트에 포함되어있어야 한다고 말한다.
- 사용하는 컴포넌트와 사용되는 컴포넌트 처럼 의존성이 생기면 해당 컴포넌트의 모든 클래스에 대해 의존함을 확실히 인지해야한다. 한 컴포넌트에 속한 클래스들은 더 작게 그룹지을 수 없다.
    - 즉 일부 클래스에만 의존하고 다른 클래스와는 독립적일 수 없음을 확실히 인지해야한다.
- CRP는 어떤 클래스를 한데 묶어서는 안되는지에 대해서 훨씬 더 많은 것을 이야기한다. 강하게 결합되지 않은 클래스들을 동일한 컴포넌트에 위치시켜서는 안된다.

## ISP와의 관계

- CRP는 인터페이스 분리 원칙(ISP)의 포괄적인 버전이다.

> 필요하지 않은 것에 의지하지 말라.
> 

# 컴포넌트 응집도에 대한 균형 다이어그램

---

- REP와 CCP는 포함 원칙, 컴포넌트를 더욱 크게 만든다. CRP는 배제 원칙, 컴포넌트를 더욱 작게 만든다.
- 균형 다이어그램

![Untitled](13%E1%84%8C%E1%85%A1%E1%86%BC%20%E1%84%8F%E1%85%A5%E1%86%B7%E1%84%91%E1%85%A9%E1%84%82%E1%85%A5%E1%86%AB%E1%84%90%E1%85%B3%20%E1%84%8B%E1%85%B3%E1%86%BC%E1%84%8C%E1%85%B5%E1%86%B8%E1%84%83%E1%85%A9%20e22fa022a2a9436db48a88e158fd4175/Untitled.png)

- 뛰어난 아키텍트라면 이 균형 삼각형을 우리팀에 어떻게 적용해야하는지 찾아야한다.
    - 예를 들어, 프로젝트 초기에는 REP가 정말 중요하다.

# 결론

---

시간이 흐름에 따라서 균형 삼각형중에서 필요로 하는 요소가 달라질 수 있다. 계속 유념하자.