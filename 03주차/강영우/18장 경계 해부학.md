# 18장 경계 해부학

# 경계 횡단하기

---

- ‘런타임에 경계를 횡단한다’는 경계 한쪽에 있는 기능에서 반대편 기능을 호출하여 데이터를 전달하는 일
- 적절한 위치에서 경계를 횡단하게 하는 비결은 소스코드 의존성 관리에 있다.
- 경계는 변경이 전파되는 것을 막는 방화벽을 구축하고 관리하는 수단으로써 존재한다.

# 두려운 단일체

---

- 배포관점에서 볼 떄 모놀리식으로 구현된 단일체는 경계가 잘 드러나지 않는다.
- 단일체 안에서도 다양한 컴포넌트가 있고, 독립적으로 수행 가능하게 하는 것은 대단히 가치있는 일이다.
- 이런 아키텍처는 특정한 동적 다형성에 의존하여 내부 의존성을 관리한다.
- 정적 링크된 모놀리식 구조의 실행 파일이라도 규칙적인 방식으로 구조를 분리하면 프로젝트를 개발, 테스트, 배포하는 작업에 큰 도움이 된다. 고수준 컴포넌트는 저수준 세부사항으로부터 독립적으로 유지된다.

# 배포형 컴포넌트

---

- 아키텍처의 경계가 물리적으로 드러나는 경우는 대표적으로 동적 링크 라이브러리다.
- 컴포넌트를 이 형태로 배포하면 따로 컴파일 없이 바로 사용 가능하다.
- 배포 과정에서만 차이가 날 뿐, 배포 수준의 컴포넌트는 단일체와 동일하다.

# 스레드

---

- 단일체와 배포형 컴포넌트는 모두 스레드를 활용할 수 있다.
- 스레드는 아키텍처 경계도 아니며 배포 단위도 아니다.
- 실행 계획과 순서를 체계화하는 방법에 가깝다.
- 모든 스레드가 단 하나의 컴포넌트에 포함될 수도 있고, 많은 컴포넌트에 걸쳐 분산될 수도 있다.

# 로컬 프로세스

---

- 명령행과 유사한 시스템 호출을 통해 생성된다.
- 로컬 프로세스들은 동일한 프로세스 또는 하나의 멀티코어 시스템에 속한 여러 프로세서들에서 실행되지만 각각 독립된 주소 공간에서 실행된다.
- 대개 운영체제에서 제공하는 통신 기능을 이용해 통신한다.
- 각 로컬 프로세스는 정적으로 링크된 단일체거나 동적으로 링크된 여러 컴포넌트로 구성 가능하다.
- 로컬 프로세스를 일종의 최상위 컴포넌트라고 생각하자.
    - 로컬 프로세스는 컴포넌트 간 의존성을 동적 다형성을 통해 관리하는 저수준 컴포넌트로 구성된다.
- 로컬 프로세스 간 분리 전략으로 소스 코드 의존성의 화살표는 항상 고수준 컴포넌트를 향한다.
- 통신에 드는 비용이 꽤나 비싼 작업이므로 너무 빈번하게 이루어지지 않도록 제한해야한다.

# 서비스

---

- 물리적인 형태를 띠는 가장 강력한 형태
- 물리적 위치에 구애받지 않고 네트워크를 통해 통신이 이루어진다.
- 통신은 매우 느리다.

# 결론

---

대체로 한 시스템 안에서도 통신이 빈번한 로컬 경계와 지연을 중요하게 고려해야하는 경계가 혼합되어 있다.