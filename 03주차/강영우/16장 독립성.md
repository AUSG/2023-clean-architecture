# 16장 독립성

- 좋은 아키텍처가 지원해야하는 것
    - 시스템의 유스케이스
    - 시스템의 운영
    - 시스템의 개발
    - 시스템의 배포

# 유스케이스

---

- 시스템의 아키텍처는 시스템의 의도를 지원해야한다. 반드시 유스케이스를 지원해야한다.
- 행위를 명확히 하고 외부로 드러내며 시스템이 지닌 의도를 아키텍처 수준에서 알아볼 수 있도록 만드는 것이다.

# 운영

---

- 시스템의 운영 지원 관점에서 볼 때 아키텍처는 더 실질적이며 덜 피상적인 역할을 맡는다.
- 시스템의 요구사항에 맞게 아키텍처는 보장해야한다.

# 개발

---

- 아키텍처는 개발환경을 지원하는 데 있어 핵심적인 역할을 수행한다.

> 콘웨이의 법칙: 시스템을 설계하는 조직이라면 어디든지 그 조직의 의사소통 구조와 동일한 구조의 설계를 만들어 낼 것이다.
> 
- 팀들끼리 서로 방해하지 않도록 독립적으로 활동 가능한 아키텍처를 확보해야한다.

# 배포

---

- 아키텍처는 배포 용이성을 결정하는데 중요한 역할을 한다.
- 목표는 즉각적인 배포

# 선택사항 열어놓기

---

- 좋은 아키텍처는 컴포넌트 구조와 관련된 위 관심사들 사이의 균형을 맞추고 모두를 만족시킨다.
- 선택사항을 열어 둠으로써 향후 시스템에 변경이 필요할 때 어떤 방향으로든 쉽게 변경할 수 있도록 한다.

# 계층 결합 분리

---

- 아키텍트는 단일 책임 원칙과 공통 폐쇄 원칙을 사용해 그 의도의 맥락에 따라서 다른 이유로 변경되는 것들은 분리하고, 동일한 이유로 변경되는 것들은 묶는다.
- 서로 결합되지 않은 수평적인 계층으로 분리해야한다.

# 유스케이스 결합 분리

---

- 유스케이스는 서로 다른 이유로 변경될 수 있다.
- 시스템을 수평적 계층으로 분할하면서 동시에 해당 계층을 가로지르는 얇은 수직적인 유스케이스로 시스템을 분할할 수 있다.
- 시스템에서 서로 다른 이유로 변경되는 요소들의 결합을 분리하면 기존 요소에 지장을 주지 않고도 새로운 유스케이스를 계속해서 추가할 수 있게 된다.

# 결합 분리 모드

---

- 유스케이스에서 서로 다른 관점(aspect)이 분리되었다면, 높은 처리량을 보장해야하는 유스케이스와 낮은 처리량으로도 충분한 유스케이스는 이미 분리되어었을 것이다.
- 유스케이스를 위해 수행하는 그 작업들(결합 분리)은 운영에도 도움이 된다.
    - 하지만 운영 측면에서 이점을 살리기 위해선 결합을 분리할 때 적절한 모드를 선택해야 한다.
- 때때로 컴포넌트를 서비스 수준까지도 분리를 해야한다.

# 개발 독립성

---

- 컴포넌트가 완전히 분리되면 팀 사이의 간섭은 줄어든다.

# 배포 독립성

---

- 유스케이스와 계층의 결합이 분리되면 배포 측면에서도 고도의 유연성이 생긴다.

# 중복

---

- 중복은 진짜 중복이거나 우발적 중복이다.
    - 똑같이 보이는 두 코드 영역이 각자의 경로로 발전한다면 진짜 중복이 아니다.
- 중복이 우발적인지 진짜인지 구분해내자

# 결합 분리 모드(다시)

---

- 계층과 유스케이스의 결합을 분리하는 방법
    - 소스 수준 분리 모드: 모놀리식 구조
    - 배포 수준 분리 모드
    - 서비스 수준 분리 모드: 마이크로 서비스
- 현시점에서 가장 인기있어 보이는 것은 서비스 수준으로 분리하는 것이지만 팀내에서 잘 고려해볼 것

# 결론

---

시스템의 결합 분리 모드는 시간이 지나면서 바뀌기 쉬우며, 뛰어난 아키텍트라면 이러한 변경을 예측하여 큰 무리 없이 반영할 수 있도록 만들어야한다.