# 20장 업무 규칙

- 업무 규칙: 사업적으로 수익을 얻거나 비용을 줄일 수 있는 규칙 또는 절차
- 핵심 업무 규칙
    - 대출에 N%의 이자를 부과한다는 사실은 사업 자체에 핵심적이며, 규칙을 자동화하는 시스템이 없더라도 업무 규칙은 그대로 존재하기 때문에 핵심 업무 규칙이라고 불린다.
- 핵심 업무 데이터
    - 핵심 업무 규칙을 이행하기 위한 데이터(시스템 자동화 여부에 상관 없음)
- 엔티티(Entity): 핵심 규칙과 데이터를 객체로 만들 때

# 엔티티

---

- 엔티티는 컴퓨터 시스템 내부의 객체로서, 핵심 업무 데이터를 기반으로 동작하는 일련의 조그만 핵심 업무 규칙을 구체화 한다. 그리고 핵심 업무 규칙을 구현한 함수로 구성된다.
- 대출의 예
    
    
    | Loan |
    | --- |
    | - principle
    - rate
    - period |
    | + makePayment()
    + applyInterest()
    + chargeLateFee() |
- 이 인터페이스는 어떤 시스템에서도 업무를 수행할 수 있으며, 다른 요소에 의해 오염되면 안된다.
- 고수준.

# 유스케이스

---

- 유스케이스는 자동화된 시스템이 사용되는 방법을 설명한다.
- 유스케이스는 입력, 출력, 처리단계를 기술한다.
- 엔티티의 핵심 업무 규칙과는 반대로, 유스케이스는 애플리케이션에 특화된 업무 규칙을 설명한다.
- 유스케이스는 엔티티 내부의 핵심 업무 규칙을 어떻게 언제 호출할지를 결정한다.
- 유스케이스는 사용자 인터페이스(웹, 앱, 콘솔, 클라이언트 등등)를 정의하지 않는다.
- 엔티티는 유스케이스에 대해 아무것도 모른다. 의존성 역전 법칙.
- 저수준.

# 요청 및 응답 모델

---

- 유스케이스의 데이터 구조는 어떤 것에도 의존하면 안된다.
- 요청 및 응답 모델이 독립적이지 않다면, 그 모델에 의존하는 유스케이스도 결국 해당 모델이 수반하는 의존성에 간접적으로 결합되어 버린다.
- 요청 및 응답 데이터 구조에 엔티티 객체를 가리키는 참조를 포함하지 마라. 두 객체의 목적은 완전히 다르다. (공통 폐쇄 원칙과 단일 책임 원칙 위반)

# 결론

---

업무 규칙은 사용자 인터페이스나 데이터베이스와 같은 저수준의 관심사로 인해 오염되어서는 안 되며 원래 그대로의 모습으로 남아 있어야 한다.