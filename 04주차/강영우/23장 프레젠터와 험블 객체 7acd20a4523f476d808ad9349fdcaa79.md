# 23장 프레젠터와 험블 객체

- 프레젠터(Presenter): 험블 객체 패턴을 따른 형태. 아키텍처 경계를 식별하고 보호하는 데 도움된다.

# 험블 객체 패턴

---

- 배경: 테스트하기 어려운 행위와 테스트하기 쉬운 행위를 단위 테스트 작성자가 분리하기 쉽게 하는 방법으로 고안되었다.
- 행위들을 두 개의 모듈 또는 클래스로 나누고, 둘중 하나가 험블이다.
- 가장 기본적인 본질을 남기고, 테스트하기 어려운 행위들을 모두 험블 객체로 옮긴다.

# 프레젠터와 뷰

---

- 뷰는 험블객체, 프레젠터는 테스트하기 쉬운 객체다.
- 프레젠터는 데이터와 플래그를 가지고 있으므로 테스트 하기 쉽다.
- 뷰는 데이터를 기반으로 화면을 로드할 뿐이며, 다른 역할은 전혀 없다. 보잘 것 없다.

# 테스트와 아키텍처

---

- 험블 객체 패턴은 행위를 테스트하기 쉬운 부분과 테스트하기 어려운 부분으로 분리되어 아키텍처 경계가 정의되어 적합하다.

# 데이터베이스 게이트웨이

---

- 유스케이스 인터랙터와 데이터베이스 사이에 위치
- 이 게이트 웨이는 다형적 인터페이스로, 애플리케이션이 데이터베이스에 수행하는 모든 CRUD작업과 관련된 모든 메서드를 포함한다.
- 유스케이스 계층은 SQL을 허용하지 않기에 게이트웨이 인터페이스를 호출한다.
- 데이터베이스의 구현체는 험블객체이고 인터랙터는 아니다.

# 데이터 매퍼

---

- ORM은 사실 존재하지 않는다. 객체는 데이터 구조가 아니기 때문
- 사용자 관점에서 볼 때 객체는 단순히 오퍼레이션의 집합이다.
- ORM(객체 관계 매퍼)은 “데이터 매퍼”가 더 잘 어울리고, 이것은 데이터베이스 계층이다.
- 사실상 험블객체이다.

# 서비스 리스너

---

- 외부 서비스를 호출해야하는 경우에도 험블 객체 패턴을 발견할 수 있다.

# 결론

---

각 아키텍처 경계마다 험블 객체 패턴을 발견할 수 있다. 이렇게 험블 객체 패턴을 사용하면 전체 시스템 테스트 용의성을 크게 높일 수 있다.